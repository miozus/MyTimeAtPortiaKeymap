# 我的波西亚时光键位映射

替代鼠标操作，简化重复动作。

一个按键，不止一个功能。

![portiakeymap](docs/img/portiakeymap.png)

[中文文档](README.CN.md) | [README](README.md)

## 配置

- 系统 : Windows 7 / 10 / 11
- Autohotkey : H-2.0-beta.3 ( @ [thqby/AutoHotkey_H](https://github.com/thqby/AutoHotkey_H.git) )
- 《我的波西亚时光》版本 : final 2.0.141541 ( 最后更新日期 : 2021 / 08 )
- 游戏分辨率： `1680 * 1050` ( 仅限 )

## 安装

1. 下载并解压 `.zip` 文件 [下载地址](https://gitee.com/ch4li/MyTimeAtPortiaKeymap/releases) 。或者拉取本项目

```bash
git clone https://github.com/miozus/MyTimeAtPortiaKeymap.git
```

1. 用记事本或者 VScode 打开 `Portia.ahk` ，修改成你习惯的键位映射。（或者直接使用我的配置，跳过此步）
   - GameSetting : 记录你在游戏中的设置
   - Keymap : `yourHotkey::function()` , 所有功能函数都放在 `PortiaFuntions.ahk`
1. 游戏中设置:
   - [ ] 参考我的设置 [截图](docs/img/GameSettingReference.png)
   - [x] 必须设置游戏分辨率 `1680 * 1050`
   - [x] 必须勾选`重力感应` ， 使得控制鼠标视角过渡自然
1. 首次使用，右键设置以管理员权限运行 Autohotkey.exe ( win32 / x64w ) , 然后双击打开 `Portia.ahk`。
1. 开始游戏。（脚本和游戏启动顺序没有影响）

## 设计笔记

如果你想知道，这个项目代码如何从 10 行变成 1500 行的？可以看我的 [设计笔记](docs/DesignNote.md)

## 使用说明书

[![MyTimeAtPortiaKeymap](https://res.cloudinary.com/marcomontalbano/image/upload/v1638631846/video_to_markdown/images/youtube--IKSjKqAa0ww-c05b58ac6eb4c4700831b2b3070cd403.jpg)](https://www.bilibili.com/video/BV1wF41187C1 "我的波西亚时光键位映射")

<center>真机演示</center>

### 🖱️ 游戏鼠标

鼠标控制人物视角，采用 VIM 风格。

|              |     镜头     |              |
| :----------: | :----------: | :----------- |
|              | <kbd>K</kbd> |
| <kbd>H</kbd> | <kbd>J</kbd> | <kbd>L</kbd> |

| From | <kbd>I</kbd> | <kbd>O</kbd> | <kbd>;</kbd> | <kbd>'</kbd> |
| :--: | :----------: | :----------: | :----------: | :----------: |
|  To  |     左键     |     右键     |   滚轮后滚   |   滚轮前滚   |

<kbd>A</kbd> : 是减速键，同时按下 A 和 "鼠标键" 会放慢鼠标移动的速度。适合背包中按格子移动。

<kbd>/</kbd> : 调整镜头，和人物正前方同步。

### 🏃‍♀️ 角色方向

在普通模式，角色奔跑的四个方向（上，下，左，右） :

|              |      跑      |              |
| :----------: | :----------: | :----------: |
|              | <kbd>E</kbd> |              |
| <kbd>S</kbd> | <kbd>D</kbd> | <kbd>F</kbd> |

如果你打开了静态交互页面，此时角色无法移动，方向键变成另一套键位映射：

|        | <kbd>S</kbd> | <kbd>F</kbd> |     功能      |
| :----: | :----------: | :----------: | :-----------: |
| PageUI |      左      |      右      | 点击左/右按钮 |

|     热键     | 动作 |        功能        |
| :----------: | :--: | :----------------: |
| <kbd>E</kbd> |  前  | 点击上一个背包物品 |
| <kbd>D</kbd> |  后  | 点击下一个背包物品 |

如果出现了计数器，就定位到计数器的按钮了

|     修饰键      | <kbd>S</kbd> | <kbd>F</kbd> |         功能         |
| :-------------: | :----------: | :----------: | :------------------: |
|                 |      -       |      +       |       点击增减       |
| <kbd>Ctrl</kbd> |     min      |     max      |     点击最小/大      |
| <kbd>Alt</kbd>  |    center    |    center    | 点击中间，可输入数字 |

### ⛏️ 工作形态

![workState](/docs/img/workStates.gif)

每个形态都有两个技能，一起做一件事。

| 形态 | 名称 | <kbd>T</kbd> 主要技能  | <kbd>W</kbd> 辅助技能 |                       功能                        |
| :--: | :--: | :--------------------: | :-------------------: | :-----------------------------------------------: |
|  🛖   | 主人 | 继续生产正在加工的产品 |    开始最大量制作     |                   **默认状态**                    |
|  🐟  | 渔人 |      取走 +5 条鱼      |     放入 -10 条鱼     |            数字键 ⇒ 投喂 N \* 35 饭团             |
|  ⛏️  | 矿工 |        左键连点        |      按下探宝键       | <kbd>,</kbd> 停止循环; 电钻和 <kbd>I</kbd> 键更配 |

<kbd>.</kbd> : 切换至下一个形态。

### 📦 物品选择

数字键在不同场景，做出对的选择。

户外模式（默认，所有底部有装备栏的界面）

<kbd>1</kbd> ~ <kbd>P</kbd> : 无映射，保留原有按键。

手册

| 热键                        | 映射坐标      |                 |
| :-------------------------- | :------------ | :-------------- |
| <kbd>1</kbd> ~ <kbd>3</kbd> | [1, 1-3]      | 点击第 N 个标签 |
| <kbd>4</kbd> <kbd>5</kbd>   | [left, right] | 开始组装        |

背包

| 热键                                                | 映射坐标   |                          |
| :-------------------------------------------------- | :--------- | :----------------------- |
| <kbd>1</kbd> ~ <kbd>8</kbd>                         | [1-8, 1]   | 第 1 行                  |
| <kbd>9</kbd> <kbd>0</kbd> <kbd>-</kbd> <kbd>=</kbd> | [1-8, 2-5] | 第 2 ~ 5 行， 就像爬梯子 |
| <kbd>P</kbd>                                        | [1-8, P]   | 装备栏                   |

<kbd>Q</kbd> : 快速整理背包（和储物箱），最后点击左侧中心的格子。

列表界面

| 热键                        | 映射坐标 | 锅炉 / 制作台 | 遗迹 | 饲养动物 | 菜谱        |
| :-------------------------- | :------- | :------------ | :--- | :------- | :---------- |
| <kbd>1</kbd> ~ <kbd>7</kbd> | [1, 1-7] | 第 N 个产品   | 关卡 | 饲料     | 第 N 个菜谱 |

特殊地，同时按下修饰键，会伴随副作用。

| 修饰键          | 热键                        | 映射坐标 |                                   |
| :-------------- | :-------------------------- | :------- | :-------------------------------- |
| <kbd>Ctrl</kbd> | <kbd>1</kbd> ~ <kbd>P</kbd> | [1-8, N] | 接着按下交换键（到背包）          |
| <kbd>Alt</kbd>  | <kbd>1</kbd> ~ <kbd>P</kbd> | [1-8, N] | 接着按下右键（到储物箱/穿戴装备） |

### 🤖 不智能机器人

> “也许我知道你会做什么。”

户外，挖矿或坐飞机，它会保持按键，触发原来的按键。

它会在以下场景发挥作用：

- 接受商会委托
- 投喂动物饲料
- 读信
- 放置诱捕箱
- 对话选择第一个选项
- 开始挑战遗迹
- 公交车地图选择回家站台

有时它会闹情绪，需要一点要耐心。

### 🧪 开发工具

现在你也能识别场景，开发自己的工作流操作了。

|             Combine              |       <kbd>G</kbd>       |                备注                |
| :------------------------------: | :----------------------: | :--------------------------------: |
|         <kbd>Ctrl</kbd>          |   显示现在身处什么场景   | 识别每个记录的场景和状态，弹窗提示 |
|          <kbd>Alt</kbd>          |         鼠标取色         |           已拷贝至剪切板           |
|  <kbd>Ctrl</kbd> <kbd>Alt</kbd>  |         鼠标单击         |           已拷贝至剪切板           |
| <kbd>Ctrl</kbd> <kbd>Shift</kbd> | 打印嵌套对象的属性字符串 |           已拷贝至剪切板           |
|             ( null )             |       <kbd>G</kbd>       |            还是原来的 G            |

## 贡献

作者独立开发，欢迎提交优化请求。

## License

MIT © Copyright (c) 2021 miozus
